# Домашнее задание к занятию "`Базы данных, их типы`" - `Фумелли Петр`


Задание 1. СУБД

1.1. Бюджетирование проектов, финансовые отчёты и прогнозирование рисков
Рекомендуемая СУБД: Реляционная (SQL) – PostgreSQL, Oracle, MS SQL Server
Требуется целостность данных и их строгая структура → ACID-транзакции
Финансовые аналитические отчёты требуют мощных SQL-запросов, агрегаций, джойнов
Надёжность и поддержка хранимых процедур для сложных финансовых вычислений

1.1.1 Как ускорить хеширование?

Если хеширование (например, паролей или данных) занимает много времени, можно использовать:
bcrypt, Argon2 – но они медленные
SHA-256, SHA-512 (из библиотеки hashlib) – быстрее, но менее безопасны
Аппаратное ускорение (например, OpenSSL)
Redis для кеширования уже вычисленных хешей

1.2. Лендинги и CRM
Рекомендуемая СУБД:
Для лендингов – NoSQL (MongoDB, Firebase, CouchDB) (гибкость, высокая скорость)
Для CRM – Реляционная (MySQL, PostgreSQL, MS SQL Server) (структурированные данные, связи между лидами, клиентами)
Лендинги часто хранят структурированные + неструктурированные данные (например, JSON)
CRM нуждается в строгих связях между лидами, клиентами, задачами менеджеров

1.2.1 Можно ли всё сделать в одной СУБД?
Да, если выбрать PostgreSQL с поддержкой JSONB. Он позволяет одновременно:
Хранить гибкие данные (лендинги)
Обрабатывать структурированные CRM-данные

1.3. База знаний отдела контроля качества
Рекомендуемая СУБД: Документная NoSQL (MongoDB, ElasticSearch, Firebase)
Хранение корпоративных норм, правил и обучающих материалов (чаще всего в текстовом формате)
Простая структура без сложных реляционных связей
Быстрая полнотекстовая индексация

1.3.1 Можно ли использовать уже существующую СУБД?
Да, если CRM использует PostgreSQL с JSONB – можно в ней же хранить нормативную документацию
Или использовать ElasticSearch (если важен быстрый поиск)

1.4. Логистика (формирование маршрутов, распределение курьеров)
Рекомендуемая СУБД: Графовая (Neo4j, ArangoDB)
Быстрая работа со связями (где какой курьер, какие маршруты, доставки)
Оптимизация маршрутов через графовые алгоритмы (Dijkstra)
Возможность легко масштабироваться

1.4.1. Подключение отдела закупок

Можно использовать одну и ту же СУБД
Логистика + закупки могут быть в Neo4j (если закупки тоже связаны с маршрутами)
Если закупки хранят больше таблиц, то лучше PostgreSQL + связка с Neo4j

1.5. Можно ли решить все задачи одной СУБД?
Да, если выбрать PostgreSQL + расширения для разных типов данных

Единое решение: PostgreSQL
Бюджетирование (финансовые отчёты, аналитика) → Реляционные таблицы, ACID
CRM (лиды, клиенты) → Таблицы + JSONB
Лендинги → JSONB (гибкость, скорость)
База знаний (нормативы, обучение) → Full-text Search + JSONB
Логистика и закупки → PostGIS (геоданные) или связка с Neo4j
Дополнительные технологии для ускорения:
Redis для кеширования
ElasticSearch для быстрого поиска
GraphDB (Neo4j) или PostGIS для логистики
Если нужен более масштабируемый вариант, можно использовать MongoDB для лендингов, PostgreSQL для CRM, Neo4j для логистики.


Задание 2. Транзакции

Пополение баланса

1) Проверка данных пользователя:
   - Проверить номер телефона (правильный формат, существует ли в системе)
   - Проверить баланс пользователя (достаточно ли средств на счёте или карте)

2) Блокировка суммы на счету:
   - Заблокировать нужную сумму на банковском счёте или карте пользователя
   - Гарантия того, что деньги не будут потрачены на другую операцию

3) Создание записи о транзакции:
   - Создать запись в базе данных с указанием:
      Номера телефона
      Суммы пополнения
      Статуса транзакции ("В процессе")
      Времени операции

4) Пополнение баланса телефона:
    - Отправить запрос в платёжную систему оператора мобильной связи
    - Дождаться подтверждения о зачислении средств

5) Обновление статуса транзакции:
    - При успешном пополнении:
        Обновить статус транзакции на "Успешно"
        Разблокировать сумму на банковском счёте и провести списание
    - При неудаче:
        Обновить статус на "Ошибка"
        Разблокировать сумму без списания

6) Уведомление пользователя:
     - Отправить SMS или уведомление о результатах операции:
        Успешное пополнение (с указанием суммы и нового баланса)
        Ошибка пополнения (с указанием причины, если возможно)

Автоплатёж

1)
